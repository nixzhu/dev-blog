# Flipboard åœ¨ iOS ä¸Šæ€æ ·æ’­æ”¾ GIF åŠ¨ç”»

æœ¬æ–‡ç¿»è¯‘è‡ªï¼š[http://engineering.flipboard.com/2014/05/animated-gif/](http://engineering.flipboard.com/2014/05/animated-gif/)

åŸä½œè€…ï¼š[Raphael Schaad](https://twitter.com/raphaelschaad)

è¯‘è€…ï¼š[@nixzhu](https://twitter.com/nixzhu)

---

Flipboard ä¸€ç›´è°‹æ±‚çš„æ˜¯â€œçƒ¹é¥ªåŸå§‹Webâ€å¹¶å°†å…¶è½¬åŒ–ä¸ºå¦‚æ‚å¿—èˆ¬ä¼˜é›…çš„ä¸œè¥¿ã€‚æˆ‘ä»¬è€ƒè™‘åˆ°è®¸å¤šç»†èŠ‚â€”â€”ä»æ–‡ç« çš„æ’ç‰ˆåˆ°ç›¸ç‰‡çš„å¸ƒå±€â€”â€”ä»¥å°½å¯èƒ½å¿ å®åœ°å±•ç°å†…å®¹çš„æœ¬è´¨ã€‚

è€Œå¯¹äº GIF æ¥è¯´ï¼Œæˆ‘ä»¬æƒ³è®©å®ƒä»¬åœ¨æˆ‘ä»¬çš„åº”ç”¨é‡Œè‡ªåŠ¨æ’­æ”¾ã€‚è‡ªåŠ¨æ’­æ”¾æ˜¯åŠ¨æ€ GIF çš„ä¸»è¦è¯‰æ±‚ã€‚ç„¶è€Œï¼ŒiOS ä¸Šçš„è®¸å¤šåº”ç”¨ä»…ä»…åªæ˜¯æ¸²æŸ“ GIF çš„é™æ€å¸§â€”â€”ä¸€ä¸ªç”±åœ¨çœŸæœºä¸Šå®æ—¶åœ°æµç•…æ’­æ”¾å¤šä¸ª GIF æ‰€å¯¼è‡´çš„å¤æ‚æ€§è€Œå¸¦æ¥çš„ä¸å¹¸ç»“æœã€‚

æŸäº›äººå¯èƒ½ä¼šæƒ³ï¼Œè¿™ä¹ˆ[å¤è€çš„å›¾ç‰‡æ ¼å¼][1]å¯¹äºåœ¨ç°ä»£çš„ iOS è®¾å¤‡ä¸Šå·¥ä½œçš„å¼€å‘è€…æ¥è¯´åº”è¯¥æ˜¯å¼€ç®±å³ç”¨çš„å§ã€‚ä½†ç”šè‡³æ˜¯ Apple è‡ªå®¶çš„ä¸€äº›åº”ç”¨éƒ½ä¸æ”¯æŒæ’­æ”¾å®ƒä»¬ã€‚å½“ç”¨ç§»åŠ¨æµè§ˆå™¨æŸ¥çœ‹è¿‡å®ƒä»¬åï¼Œç³»ç»Ÿç»å¸¸ä¼šå˜æ…¢åˆ°åƒåœ¨çˆ¬è¡Œã€‚åœ¨å®šæ—¶é‡æ”¾å¹¶ä¿è¯ä¿çœŸåº¦çš„åŒæ—¶ï¼Œä¿æŒè¾ƒå°çš„å†…å­˜å ç”¨å’Œ CPU ä½¿ç”¨ç‡å®åœ¨æ˜¯ä¸€ä¸ªæŒ‘æˆ˜ã€‚

æˆ‘ä»¬å…³äºæ”¯æŒåŠ¨æ€ GIF çš„éœ€æ±‚å¦‚ä¸‹ï¼š

* ä»¥å ªæ¯”æ¡Œé¢æµè§ˆå™¨çš„æ’­æ”¾é€Ÿåº¦åŒæ—¶æ’­æ”¾å¤šä¸ª GIF 
* ä¿è¯å¯å˜å¸§å»¶è¿Ÿ
* åœ¨å†…å­˜å‹åŠ›ä¸‹ä¾ç„¶è¡¨ç°ä¼˜é›…
* åœ¨ç¬¬ä¸€æ¬¡æ’­æ”¾æ—¶æ¶ˆé™¤å»¶è¿Ÿæˆ–å¡é¡¿
* å¦‚åŒç°ä»£æµè§ˆå™¨é‚£æ ·è§£è¯‘ fast GIF çš„å¸§å»¶è¿Ÿï¼ˆæ³¨è§£1ï¼‰

å› ä¸ºæ²¡æœ‰å†…ç½®çš„æ–¹æ³•æˆ–å¼€æºåº“èƒ½å¤Ÿæ»¡è¶³æ‰€æœ‰è¿™äº›éœ€æ±‚ï¼Œæ‰€ä»¥æˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªå¼•æ“å¹¶ä»[å»å¹´å‘å¸ƒ][2]å¼€å§‹èµ·å°±ä¸€ç›´ç£¨ç»ƒå®ƒã€‚æˆ‘ä»¬è®¤ä¸ºä¸ç¤¾åŒºåˆ†äº«å®ƒæ˜¯æˆ‘ä»¬ç›®å‰æœ€å¥½çš„é€‰æ‹©ã€‚

å¦‚æœä½ æƒ³å¢åŠ å¯¹åŠ¨æ€ GIF çš„æ”¯æŒä»¥å¢å¼ºä½ çš„ iOS åº”ç”¨ï¼Œè¯·å‰å¾€ GitHub [æŒ‰ç…§ç®€å•çš„æŒ‡ç¤ºæ¥ä½¿ç”¨æˆ‘ä»¬çš„å¼€æºç»„ä»¶][3]ã€‚

![][4]

## iOS ä¸ºåŠ¨æ€å›¾åƒæä¾›äº†ä»€ä¹ˆ

iOS ä¸Šæ˜¾ç¤ºå›¾ç‰‡çš„å…¸å‹æ–¹å¼æ˜¯ç”¨å›¾åƒæ•°æ®åˆ›å»ºä¸€ä¸ª [`UIImage`][5] å¹¶å°†å…¶å±•ç°åœ¨å±å¹•ä¸Šçš„æŸä¸ª [`UIImageView`][6] ä¸­ã€‚ç„¶è€Œï¼Œè™½ç„¶æœ‰è¶…è¿‡ä¸€æ‰“çš„åˆå§‹åŒ–æ–¹æ³•ï¼Œä½†æ²¡æœ‰ä¸€ä¸ªå¯ä»¥ä»å•ä¸ªçš„å¤šå¸§å›¾åƒï¼ˆæ³¨è§£2ï¼‰é‡Œåˆ›å»ºä¸€ä¸ªåŠ¨æ€å›¾åƒã€‚Image View ä»…ä»…æ˜¾ç¤ºç¬¬ä¸€ä¸ªé™æ€å¸§ï¼Œæ‰€ä»¥å±å¹•ä¸Šæ²¡æœ‰åŠ¨ç”»ã€‚ç¨‹åºå‘˜å¿…é¡»ç”¨ Apple çš„ [`ImageIO`][7] æ¡†æ¶å°†æ¯ä¸€å¸§åŠ è½½ä¸ºä¸€ä¸ªå•ç‹¬çš„å›¾åƒå¹¶ä½¿ç”¨ `UIImageView` çš„ APIï¼š `animatedImages` ã€`animationDuration` ä»¥åŠ `animationRepeatCount` æ¥å®ŒæˆåŠ¨ç”»ã€‚

è¿™ç§æ–¹æ³•çš„ç¼ºç‚¹æ˜¯æ— æ³•ä¿è¯ GIF çš„å¯å˜å¸§å»¶è¿Ÿã€‚

![][8]

å…·æœ‰å¯å˜å¸§å»¶è¿Ÿçš„äº”ä¸ªå¸§ã€‚

è®©æˆ‘ä»¬å‡è®¾å¸§å’Œå…ƒæ•°æ®çš„åŠ è½½ä»£ç åœ¨ `UIImage+animatedImage`  ç±»åˆ«é‡Œå¹¶è€ƒè™‘å¦‚ä¸‹ä»£ç ï¼š

```Objective-C
imageView.animationDuration = image.delayTimes[0] * animatedImage.frameCount;
```

![][9]

```Objective-C
imageView.animationDuration = image.totalDelayTimes;
```

![][10]

å¾ˆæ˜æ˜¾ä»£ç ä½¿ç”¨ç¬¬ä¸€å¸§çš„å»¶è¿Ÿä½œä¸ºæ¯ä¸€å¸§çš„å»¶è¿Ÿæˆ–é¢„å…ˆå‡è®¾å…¨éƒ¨å¸§å»¶è¿Ÿçš„é•¿åº¦ï¼Œä½†è¿™ä¸¤ç§æ–¹å¼éƒ½ä¸ä¼šå¸¦æ¥å¾ˆå¥½çš„æ•ˆæœã€‚

å¦ä¸€ç§é€‰æ‹©æ˜¯ä½¿ç”¨ `UIWebView` ï¼Œè¿™æ · GIF å°±ç”± WebKit è´Ÿè´£è§£ç å’Œæ˜¾ç¤ºï¼Œå°±å¦‚åŒæ¡Œé¢æµè§ˆå™¨é‚£æ ·ã€‚

ç„¶è€Œï¼ŒWeb View æ²¡æœ‰ä¸ºåœ¨ç§»åŠ¨è®¾å¤‡ä¸Šæ’­æ”¾ GIF è€Œåšä¼˜åŒ–ï¼Œç»å¸¸ä¼šé™ä½æ’­æ”¾é€Ÿåº¦ã€‚åŒæ—¶ä¹Ÿä¸èƒ½å¾ˆå¥½åœ°æ§åˆ¶å›æ”¾è¿‡ç¨‹æˆ–å†…å­˜å ç”¨ã€‚

## å®ç°ä½ çš„è‡ªå®šä¹‰æ’­æ”¾

ä¸€ä¸ªç”¨ `UIImageView` æ˜¾ç¤ºå¹¶æ”¯æŒå¯å˜å¸§å»¶è¿Ÿçš„æ–¹å¼æ˜¯æ‰¾åˆ°æ‰€æœ‰å¸§å»¶è¿Ÿçš„[æœ€å¤§å…¬çº¦æ•°][11]å¹¶å°†å»¶è¿Ÿç¨é•¿çš„å¸§å¤šæ”¾å…¥å‡ ä¸ªåˆ°å¯¹åº”çš„ `animatedImages` æ•°ç»„é‡Œã€‚

>è¯‘è€…æ³¨ï¼šå°±æ˜¯è¯´ï¼Œå°½ç®¡æ¯ä¸€å¸§çš„å»¶è¿Ÿéƒ½ä¸€æ ·ï¼Œä½†å› ä¸ºåŸæœ¬å»¶è¿Ÿé•¿çš„é‚£äº›å¸§å› ä¸ºç›¸åº”çš„å¤šæ”¾äº†å‡ ä¸ªè¿›å»ï¼Œè¿™æ ·æ’­æ”¾æ—¶ï¼Œæ•´ä¸ªåŠ¨ç”»çš„æ„Ÿè§‰å°±ä¸ä¼šå˜ã€‚

![][12]  
æ§½çš„æŒç»­æ—¶é—´ï¼ˆSlot Durationï¼‰ç”± GCD å†³å®šï¼Œæ˜¯ 1 ç§’ã€‚

æŸä¸ªå¸§ç¬¬ä¸€æ¬¡æ˜¾ç¤ºåœ¨å±å¹•ä¸Šæ—¶ï¼Œå‹ç¼©çš„å›¾åƒæ•°æ®ä¼šè¢«è§£ç ä¸ºæœªå‹ç¼©çš„ä½å›¾å½¢å¼ã€‚è¿™æ˜¯ä¸€ä¸ªè¾ƒä¸ºæ¶ˆè€— CPU çš„æ“ä½œï¼Œå› æ­¤ç¬¬ä¸€æ¬¡æ’­æ”¾æ—¶ä¼šå˜æ…¢ã€‚

æ›´æ£˜æ‰‹çš„æ˜¯å†…å­˜å ç”¨ï¼›ä¸€æ—¦å›¾åƒè¢«è§£ç ï¼Œä½å›¾å°±é™„åŠ åˆ°å›¾åƒå¯¹è±¡ä¸Šå¹¶ä¼šä¸€ç›´åœ¨å®ƒçš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸé‡Œå­˜åœ¨ã€‚è¿™å°†ä½¿å¾—æˆ‘ä»¬çš„ Image View ç¼“å­˜ç€æ‰€æœ‰è¿™äº›å·¨å¤§çš„ï¼ˆæ³¨è§£3ï¼‰ä½å›¾æ•°æ®â€”â€”è¿™å‡ ä¹æ˜¯æœ€ç³Ÿç³•çš„æ¶ˆè€—å†…å­˜çš„æ–¹å¼ï¼ˆæ³¨è§£4ï¼‰ã€‚

å½“ Apple ç»™ `UIImage` å’Œ `UIImageView` æ·»åŠ åŠ¨ç”»å±æ€§æ—¶ï¼Œä»–ä»¬å®é™…ä¸Šæ˜¯å°†å…¶è®¾è®¡ä¸ºç”¨äºå°å‹çš„ UI åŠ¨ç”»ï¼Œä¾‹å¦‚è½¬åŠ¨çš„åŠ è½½æŒ‡ç¤ºå™¨ï¼Œè€Œä¸æ˜¯ç”¨äºå¤§å‹çš„åŠ¨æ€å›¾åƒã€‚ä¹Ÿè®¸æŸäº›åº”ç”¨å¯ä»¥æ‘†è„±è¿™ç§æ–¹æ³•ï¼Œä½†åœ¨æˆ‘ä»¬çš„æƒ…å†µé‡Œï¼Œè¿™æ ·åšä¼šä½¿å¾—æˆ‘ä»¬è¦ä¸ºæ¯ä¸€ä¸ª GIF æ·»åŠ ä¸€ä¸ªæ’­æ”¾æŒ‰é’®è€Œä¸”ä¸€æ¬¡åªå…è®¸æ’­æ”¾ä¸€ä¸ªã€‚è¿™å°±å°† GIF çš„ä¹è¶£å‰¥é™¤äº†ï¼Œå¯¹äºæˆ‘ä»¬çš„ç”¨æˆ·ä½“éªŒæ¥è¯´å®Œå…¨ä¸å¯æ¥å—ã€‚

## å¸§çš„æŒ‰éœ€äº§å‡ºå’Œæ¶ˆè´¹

åœ¨å†…å­˜æœ‰é™çš„æƒ…å†µä¸‹ï¼Œè‹¥ä¸èƒ½å­˜å‚¨é—®é¢˜çš„ç»“æœé‚£å°±åªèƒ½æ¯æ¬¡éƒ½é‡æ–°è®¡ç®—ã€‚åœ¨æˆ‘ä»¬çš„æƒ…å†µé‡Œï¼Œæˆ‘éœ€è¦åœ¨å¸§è¢«æ˜¾ç¤ºä¹‹å‰åŠ è½½å¹¶è§£ç å®ƒï¼Œå¹¶å°†ä¸åœ¨å±å¹•ä¸Šçš„é‚£äº›å¸§æ¸…é™¤ã€‚è¿™å°±æ˜¯æ‰€è°“çš„[ç”Ÿäº§è€…-æ¶ˆè´¹è€…é—®é¢˜][13]ï¼›ä¸€ä¸ªçº¿ç¨‹ç”Ÿäº§æ•°æ®ï¼Œå¦ä¸€ä¸ªçº¿ç¨‹æ¶ˆè€—å®ƒã€‚æˆ‘ä»¬éœ€è¦ä¸€ä¸ªç”Ÿäº§è€…äº§å‡ºä¸€ä¸ªç”¨äºè§†å›¾çš„å¸§æµï¼Œä»¥æŒ‰éœ€æ¶ˆè´¹å®ƒä»¬ã€‚ç”Ÿäº§è€…åœ¨å¯ç”¨å†…å­˜å˜å°‘æ—¶ä¼šèŠ‚æµï¼Œè€Œæ¶ˆè´¹è€…å°†ç›¸åº”æ”¹å˜å¸§å®šæ—¶ã€‚è¯‘è€…æ³¨ï¼šå¤§æ¦‚æ˜¯è¯´ï¼Œå†…å­˜ç´§å¼ æ—¶ï¼ŒåŠ¨ç”»å°±ä¼šå˜æ…¢ã€‚

![][14]  
é‡è¦ç»„ä»¶çš„æ¦‚è¿°å·²åœ¨ UML ä¸­é«˜äº®æ˜¾ç¤º

### FLAnimatedImage

[`FLAnimatedImage`][15] ç”¨ GIF æ•°æ®åˆå§‹åŒ–ï¼Œä¹‹åå®ƒçš„å·¥ä½œå°±æ˜¯åœ¨è¢«é€šè¿‡ `- (UIImage *)imageLazilyCachedAtIndex:(NSUInteger)index` è¯·æ±‚æ—¶å°½å¯èƒ½å¿«åœ°é€’å‘é‚£ä¸€å¸§ï¼Œè€Œä¸”ä»…ä½¿ç”¨å°éƒ¨åˆ†å†…å­˜ã€‚

å®ƒè¯•ç€æ™ºèƒ½åœ°æ ¹æ®å›¾åƒå°ºå¯¸å’Œå†…å­˜æƒ…å†µé€‰æ‹©å¸§ç¼“å­˜çš„å¤§å°ï¼šå¦‚æœæ˜¯å°çš„ GIF ï¼Œæˆ‘ä»¬ä¼šè¯•ç€å°†æ‰€æœ‰å¸§éƒ½æ”¾åœ¨å†…å­˜é‡Œï¼Œå‡è½» CPU çš„è´Ÿæ‹…ã€‚å¦‚æœæ˜¯å¾ˆå¤§çš„ GIFï¼Œæˆ‘ä»¬ä¼šè¯•ç€é€šè¿‡åªç¼“å­˜è¶³å¤Ÿç”¨äºå®æ—¶å›æ”¾çš„å¸§æ¥é™ä½å†…å­˜å ç”¨ã€‚

å½“ç³»ç»Ÿå‘å‡ºå†…å­˜è­¦å‘Šæ—¶ï¼Œæ‰€æœ‰çš„åŠ¨æ€å›¾åƒå®ä¾‹éƒ½ä¸¢å¼ƒæ‰€æœ‰ä½äºç¦»å±ç¼“å­˜ï¼ˆoff-screen bufferï¼‰å†…çš„å¸§å¹¶å€’å›åˆ°æŒ‰éœ€è§£ç ã€‚è¿‡ä¸€æ®µæ—¶é—´ï¼Œå®ƒä»¬ä¼šå†æ¬¡å»ºç«‹èµ·ç¼“å­˜ã€‚å¦‚æœå‘ç”Ÿäº†å¤šæ¬¡å†…å­˜è­¦å‘Šï¼Œå®ƒä»¬å°†ä¼šä¿æŒåœ¨æ¯ä¸€å¸§éƒ½æŒ‰éœ€è§£ç ã€‚è®¾è®¡è¿™ç§è¡Œä¸ºæ—¶ï¼Œé¿å…æœ€ç³Ÿç³•çš„ç”¨æˆ·ä½“éªŒï¼ˆå³åº”ç”¨å´©æºƒï¼‰æ˜¯éå¸¸é‡è¦çš„ï¼Œä¸ºæ­¤æˆ‘ä»¬å®æ„¿é™ä½æ’­æ”¾é€Ÿåº¦ã€‚

### FLAnimatedImageView

[`FLAnimatedImageView`][16] å¯æ¥å—ä¸€ä¸ª `FLAnimatedImage` å¹¶åœ¨å†…éƒ¨ä½¿ç”¨ä¸€ä¸ª `CADisplayLink` å®æ—¶æ’­æ”¾å®ƒã€‚

ä¸ºäº†é¿å…å¤„ç†å¤æ‚çš„é”è·å–ï¼ˆLock Acquisitionï¼‰ï¼Œæˆ‘ä»¬å°†åœ¨æ²¡æœ‰å‡†å¤‡å¥½æ¶ˆè´¹è€…æ‰€éœ€æ•°æ®çš„æƒ…å†µä¸‹è®©ç”Ÿäº§è€…è¿”å› `nil`ï¼Œå¹¶ä¿æŒæ˜¾ç¤ºå‰ä¸€å¸§ã€‚è¿™ç®€åŒ–äº†å¤šçº¿ç¨‹ä»£ç å¹¶ç¨æ…¢ä¸€ç‚¹å¾—åˆ°æ‰€æœŸæœ›çš„ç»“æœï¼ˆè¯‘è€…æ³¨ï¼šå¤§æ¦‚æŒ‡è¿”å›nilçš„é‚£ä¸€å¸§ï¼‰ï¼Œè€Œä¸”èƒ½æ­£ç¡®åœ°æ’­æ”¾åŠ¨ç”»ã€‚

### è®¾è®¡ä¸€ä¸ªå°è£…è‰¯å¥½çš„æ’å…¥å¼ç»„ä»¶

`FLAnimatedImage` ç›´æ¥ç»§æ‰¿è‡ª `NSObject` ï¼Œå› ä¸ºå®ƒè‹¥ç»§æ‰¿äº `UIImage` èƒ½è·å¾—æ”¶ç›Šå…¶å®å¾ˆå°‘ã€‚å¦ä¸€æ–¹é¢è¯´æ¥ï¼Œ`FLAnimatedImageView` å®Œå…¨å…¼å®¹ `UIImageView` å­ç±»å¹¶å¯ç«‹å³æŠ•å…¥ä½¿ç”¨ä»¥å–ä»£å…¶ä½ç½®ï¼›è®¾ç½®ä¸€ä¸ª `UIImage` æˆ–ä¸€ä¸ª `FLAnimatedImage` åœ¨å…¶ä¸Šéƒ½å¯ä»¥ä»¥æˆ‘ä»¬æ‰€æœŸæœ›çš„æ–¹å¼æ­£å¸¸å·¥ä½œã€‚æ‰€ä»¥æ— è®ºä½•å¤„æˆ‘ä»¬è¦æ˜¾ç¤ºä¸€ä¸ªå›¾åƒï¼Œæˆ‘ä»¬å°±ä½¿ç”¨ `FLAnimatedImageView` ï¼Œç„¶åå®ƒå°±è‡ªåŠ¨æ­£ç¡®åœ°å¤„ç†å‰©ä¸‹çš„äº‹æƒ…ã€‚

å½“è€ƒè™‘æ¶æ„æ—¶ï¼Œåˆ›å»ºä¸€ä¸ªè‡ªåŒ…å«ã€å¯é‡ç”¨çš„ç»„ä»¶æ˜¯éå¸¸é‡è¦çš„ã€‚å¤šä¸ª `FLAnimatedImage`-`FLAnimatedImageView` å¯¹ä¾ç„¶å¯åœ¨æ²¡æœ‰ä¸­å¤®ç¼“å­˜æ—¶è¢«ä½¿ç”¨ã€‚å®ƒä»¬éƒ½å°Šé‡ç³»ç»Ÿå¹¶ä¸”ç‹¬ç«‹åœ°å°è¯•åšåˆ°æœ€å¥½ä»¥æˆä¸ºé‡Œé¢çš„ä¼Ÿå¤§å…¬æ°‘ï¼ˆThey're all aware of the system and independently try to do the best to be great citizens.ï¼‰ã€‚

è¿™ä¸ªæ¨¡å—æœ‰å¤§çº¦1000è¡Œçš„ä»£ç å¹¶è¯•å›¾åšæŒâ€œåšä¸€ä»¶äº‹å¹¶åšå¥½â€çš„[Unixå“²å­¦][17]ã€‚ç›®å‰ï¼Œå®ƒå·²ç»ç»è¿‡è‰¯å¥½æµ‹è¯•ï¼Œå¯ç”¨äºç”Ÿäº§ç¯å¢ƒã€‚å®ƒä¾ç„¶è¿˜æœ‰[æ”¹è¿›ç©ºé—´][3]ï¼Œæˆ‘ä»¬æ¬¢è¿ç¤¾åŒºçš„è´¡çŒ®è€…ã€‚

## .gif

Flipboard çš„è¯»è€…å·²åˆ›é€ äº†è®¸å¤šåŠ¨æ€æ‚å¿—ï¼Œä¾‹å¦‚â€œ[GIF Me A Break][18]â€ã€â€œ[Goals goals goals!][19]â€ æˆ– â€œ[Cat GIFs ğŸ˜¹][20]â€ ã€‚GIF ä¸åªæ˜¯ä¸€ä¸ªæ–‡ä»¶æ ¼å¼ï¼Œå®ƒæ˜¯ä¸€ç§æ–‡åŒ–ï¼Œå¯ä»¥è¯´æ˜¯[ Internet çš„åŸç”Ÿè‰ºæœ¯å½¢å¼][21]ã€‚é€šè¿‡åˆ†äº«æ­¤å·¥ç¨‹æŒ‘æˆ˜ä»¥åŠ[æºä»£ç ][3]ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½è´¡çŒ®å®ƒæ›´é•¿ä¹…çš„ç”Ÿå‘½ã€‚

==============

1. è¿™é‡Œæœ‰ä¸ª[å¾ˆé•¿çš„å†å²](https://bugzilla.mozilla.org/show_bug.cgi?id=440882)ä»‹ç»ï¼Œå…³äºå¦‚ä½•é™åˆ¶å¤ªå¿«çš„ GIFã€‚
2. iOS 5 ä¸º `UIImage` æ·»åŠ äº†æ–°çš„åˆå§‹åŒ–æ–¹æ³•ä»¥ä¾¿åˆ›å»ºä¸€ä¸ªâ€œåŠ¨æ€å›¾åƒâ€ï¼ˆç”±ç§æœ‰ç±» `_UIAnimatedImage` æ”¯æŒï¼‰ï¼Œä½†å®ƒä¾ç„¶æœŸæœ›å…¶å›¾åƒè¿˜æ˜¯ç‹¬ç«‹çš„å›¾åƒã€‚
3. ä¸€ä¸ª 1MB çš„ GIF å¯å˜æˆ 55MB çš„æœªå‹ç¼©æ•°æ®ï¼ï¼ˆ800x600 åƒç´  * RGBA 4 å­—èŠ‚æ¯åƒç´  * 30 å¸§ï¼‰
4. WWDC 2011 session â€œiOS Performance In Depthâ€ æè¿°äº†å †å¯¹è±¡åªæ˜¯å†°å±±çš„ä¸€è§’ã€‚è¿™å¯ä»¥ç”¨è™šæ‹Ÿæœºè·Ÿè¸ªä»ªè¿›è¡Œæµ‹é‡ã€‚â€œè„å†…å­˜â€ æ˜¯éœ€è¦ç›‘è§†çš„æ•°æ®ï¼Œå®ƒçš„å†…å­˜æ²¡æœ‰æ˜ å°„åˆ°æ–‡ä»¶ï¼Œå› æ­¤æ— æ³•è¢«æ¸…é™¤ã€‚æˆ‘ä»¬é¢„ç»˜åˆ¶çš„å›¾åƒå°†åœ¨æ­¤ç±»åˆ«é‡Œã€‚æ³¨æ„åˆ°â€œMemory Tag 70â€åŒæ ·æ¥è‡ªå›¾åƒï¼ˆImageIOï¼‰ã€‚


ç‰¹åˆ«æ„Ÿè°¢ Ryanã€Evanã€Troyã€Eugeneã€Joshã€Charles ä»¥åŠ Chris æä¾›æƒ³æ³•å’Œæ”¹è¿›å»ºè®®ã€‚

=====================

æœ‰è®¸å¤šäº‹æƒ…æˆ‘ä»¬éƒ½æ²¡æœ‰äº²çœ¼æ‰€è§ï¼Œä½†å¹¶ä¸èƒ½è¡¨ç¤ºæˆ‘ä»¬å¯ä»¥æœ‰æ„æˆ–æ— æ„åœ°å¿½ç•¥å®ƒä»¬ã€‚è¯·è€å¿ƒäº†è§£ä¸€æ®µå†å²ï¼š[å…­å››äº‹ä»¶](http://zh.wikipedia.org/wiki/%E5%85%AD%E5%9B%9B%E4%BA%8B%E4%BB%B6)ã€‚

---

æ¬¢è¿è½¬è½½ï¼Œä½†è¯·ä¸€å®šæ³¨æ˜å‡ºå¤„ï¼š[https://github.com/nixzhu/dev-blog](https://github.com/nixzhu/dev-blog) ï¼

[1]: http://en.wikipedia.org/wiki/Graphics_Interchange_Format#Animated_GIF "Wikipedia: Animated GIF format description"
[2]: http://inside.flipboard.com/2013/08/14/new-flipboard-update-is-out-with-gifs-for-all-and-top-stories/ "Inside Flipboard: New Flipboard Update Is Out, With GIFs For All and Top Stories"
[3]: https://github.com/Flipboard/FLAnimatedImage "FLAnimatedImage open source on GitHub"
[4]: http://engineering.flipboard.com/assets/animatedgif/flanimatedimage-flipboard.gif
[5]: https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIImage_Class/Reference/Reference.html "Apple Doc: UIImage"
[6]: https://developer.apple.com/library/ios/documentation/uikit/reference/UIImageView_Class/Reference/Reference.html "Apple Doc: UIImageView"
[7]: https://developer.apple.com/library/ios/documentation/graphicsimaging/conceptual/ImageIOGuide/imageio_intro/ikpg_intro.html "Apple Doc: ImageIO"
[8]: http://engineering.flipboard.com/assets/animatedgif/frame-delays1.png
[9]: http://engineering.flipboard.com/assets/animatedgif/frame-delays2.png
[10]: http://engineering.flipboard.com/assets/animatedgif/frame-delays3.png
[11]: http://en.wikipedia.org/wiki/Greatest_common_divisor "Wikipedia: Greatest common divisor"
[12]: http://engineering.flipboard.com/assets/animatedgif/frame-delays4.png
[13]: https://en.wikipedia.org/wiki/Producerâ€“consumer_problem "Wikipedia: Producer-consumer problem"
[14]: http://engineering.flipboard.com/assets/animatedgif/uml.png
[15]: https://github.com/Flipboard/FLAnimatedImage/blob/master/FLAnimatedImageDemo/FLAnimatedImage/FLAnimatedImage.h "Source code: FLAnimatedImage class"
[16]: https://github.com/Flipboard/FLAnimatedImage/blob/master/FLAnimatedImageDemo/FLAnimatedImage/FLAnimatedImageView.h "Source code: FLAnimatedImageView class"
[17]: http://en.wikipedia.org/wiki/Unix_philosophy#McIlroy:_A_Quarter_Century_of_Unix "Wikipedia: Unix philosophy"
[18]: https://flipboard.com/section/gif-me-a-break-bcG3Lj "Flipboard magazine: GIF Me A Break"
[19]: https://flipboard.com/section/goals-goals-goals!-b7DfXm "Flipboard magazine: Goals goals goals!"
[20]: https://flipboard.com/section/cat-gifs-%F0%9F%98%B9-b49Y6v "Flipboard magazine: Cat GIFs"
[21]: https://medium.com/message/af8673796c44 "JIF is the format, GIF is the culture"
[22]: https://flipboard.com
  
